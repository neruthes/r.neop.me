<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Redirecting...</title>
    </head>
    <body>
        <script type="text/javascript">
        (function () {
            window.h = location.pathname.slice(1);
            if (h === '') {
                // No path
                location.href = 'https://github.com/neruthes/r.neop.me';
            } else {
                window.xhr = new XMLHttpRequest();
                xhr.open('get', '/db/' + h + '.txt');
                xhr.send();
                xhr.onload = function (e) {
                    console.log(e);
                    if (e.status === 200 && e.status === 304) {
                        // Exists
                        location.href = e.responseText.trim();
                    } else {
                        // 404
                        document.write(`No such short link yet.`);
                    };
                };
            };
        })()
        </script>
    </body>
</html>
